{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>CineVerse | Movies</title>

    <style>
        body{
            margin:0;
            background:#0b0b0b;
            color:white;
            font-family:Arial, sans-serif;
        }

        /* ================= TOP BAR ================= */
        .topbar{
            height:70px;
            display:flex;
            align-items:center;
            padding:0 30px;
            background:rgba(0,0,0,0.5);
            position:fixed;
            width:100%;
            top:0;
            z-index:5000;
        }

        .topbar-left{
            display:flex;
            align-items:center;
            gap:14px;
        }

        .menu-btn{
            font-size:30px;
            cursor:pointer;
            color:white;
            user-select:none;
        }

        .app-name{
            font-size:22px;
            font-weight:bold;
            color:#e50914;
        }

        /* üî• THIS IS THE FIX */
        .topbar-spacer{
            flex:1;
        }

        .topbar-right{
            display:flex;
            align-items:center;
        }

        .search{
            background:#1c1c1c;
            padding:8px 14px;
            border-radius:20px;
            width:180px;   /* üî• narrower */
            color:#fff;
            border:1px solid #333;
            font-size:14px;
            margin-right: 80px;
        }

        /* ================= SIDEBAR ================= */
        .sidebar{
            position:fixed;
            top:0;
            left:-120px;
            width:120px;
            height:100vh;
            background:rgba(0,0,0,0);
            backdrop-filter: blur(8px);
            padding:90px 15px;
            transition:0.35s ease;
            z-index:4000;
        }

        .sidebar.active{
            left:0;
        }

        .sidebar a{
            display:block;
            margin-bottom:20px;
            color:#aaa;
            text-decoration:none;
            font-size:15px;
        }

        .sidebar a:hover{
            color:white;
        }

        /* ================= MAIN ================= */
        .main{
            padding-top:70px;
        }

        /* ================= HERO ================= */
        .hero{
            height:80vh;
            display:flex;
            align-items:center;
            padding:0 60px;
            background-repeat:no-repeat;
            background-size:cover;
            background-position:center right;
        }

        .hero-content{
            max-width:600px;
        }

        .hero h1{
            font-size:52px;
            margin-bottom:12px;
            text-shadow:0 4px 14px rgba(0,0,0,0.9);
        }

        .hero p{
            line-height:1.6;
            opacity:0.9;
            text-shadow:0 4px 14px rgba(0,0,0,0.9);
        }

        .btn{
            background:#e50914;
            color:white;
            border:none;
            padding:14px 30px;
            border-radius:30px;
            font-size:16px;
            cursor:pointer;
            margin-top:20px;
        }

        /* ================= MOVIE LIST ================= */
        .section{
            padding:40px 60px;
        }

        .row{
            display:flex;
            gap:20px;
            overflow-x:auto;
        }

        .card img{
            width:180px;
            height:260px;
            border-radius:10px;
            object-fit:cover;
            transition:transform 0.3s;
        }

        .card img:hover{
            transform:scale(1.08);
        }

        .card p{
            text-align:center;
            margin-top:8px;
        }

        a{
            text-decoration:none;
            color:white;
        }
    </style>
</head>

<body>

<!-- ================= TOP BAR ================= -->
<div class="topbar">
    <div class="topbar-left">
        <div class="menu-btn" onclick="toggleSidebar()">‚ò∞</div>
        <div class="app-name">CineVerse</div>
    </div>

    <!-- üî• FLEX SPACER -->
    <div class="topbar-spacer"></div>

    <div class="topbar-right">
        <input class="search" placeholder="Search movies">
    </div>
</div>

<!-- ================= SIDEBAR ================= -->
<div class="sidebar" id="sidebar">
    <a href="#">Browse</a>
    <a href="#">Trending</a>
    <a href="{% url 'movies' %}">Movies</a>
    <a href="#">My Tickets</a>
    <a href="{% url 'logout' %}">Logout</a>
</div>

<!-- ================= MAIN ================= -->
<div class="main">

{% if hero_movie %}
<div class="hero" style="
    background-image:url('{% if hero_movie.banner %}{{ hero_movie.banner.url }}{% elif hero_movie.poster %}{{ hero_movie.poster.url }}{% else %}{% static "images/no_poster.jpg" %}{% endif %}');
">
    <div class="hero-content">
        <h1>{{ hero_movie.title }}</h1>
        <p>{{ hero_movie.genre }} ‚Ä¢ ‚≠ê {{ hero_movie.rating }}</p>
        <p>{{ hero_movie.description }}</p>

        <a href="{% url 'movie_detail' hero_movie.id %}">
            <button class="btn">‚ñ∂ Book Tickets</button>
        </a>
    </div>
</div>
{% endif %}

<div class="section">
    <h2>Now Showing</h2>

    <div class="row">
        {% for movie in movies %}
        <a href="{% url 'movie_detail' movie.id %}">
            <div class="card">
                {% if movie.poster %}
                    <img src="{{ movie.poster.url }}">
                {% else %}
                    <img src="{% static 'images/no_poster.jpg' %}">
                {% endif %}
                <p>{{ movie.title }}</p>
            </div>
        </a>
        {% endfor %}
    </div>
</div>

</div>

<script>
function toggleSidebar(){
    document.getElementById("sidebar").classList.toggle("active");
}
</script>

</body>
</html>